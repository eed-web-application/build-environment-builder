{"openapi":"3.0.1","info":{"title":"Core Build System API","description":"Core Build System API for the Accelerator Division at SLAC National Accelerator Laboratory","contact":{"name":"API Support","url":"https://confluence.slac.stanford.edu/display/EEDWAD/EED+Web+Applications","email":"bisegni@sac.stanford.edu"}},"servers":[{"url":"http://cbs:8080","description":"Generated server url"}],"tags":[{"name":"Echo Controller v1","description":"Service testing api"}],"paths":{"/v1/component/{id}":{"get":{"tags":["component-controller"],"summary":"Find a component by an id","operationId":"findComponentById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseComponentDTO"}}}}}},"put":{"tags":["component-controller"],"summary":"Delete a component by his id","operationId":"updateComponentById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateComponentDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}},"delete":{"tags":["component-controller"],"summary":"Delete a component by his id","operationId":"deleteComponentById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}}},"/v1/command/{id}":{"get":{"tags":["command-controller"],"summary":"List all command templates","operationId":"findCommandById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseCommandTemplateDTO"}}}}}},"put":{"tags":["command-controller"],"summary":"Update a command template by its unique identifier","operationId":"updateCommandById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCommandTemplateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}},"delete":{"tags":["command-controller"],"summary":"Return a command template by its unique identifier","operationId":"deleteCommandById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}}},"/v1/debug":{"post":{"tags":["debugger-utility-controller"],"summary":"Reset all the data","operationId":"deleteAll","responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}}},"/v1/component":{"get":{"tags":["component-controller"],"summary":"List all components","operationId":"listAllComponent","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListComponentSummaryDTO"}}}}}},"post":{"tags":["component-controller"],"summary":"Create a new component","operationId":"createNewComponent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewComponentDTO"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseString"}}}}}}},"/v1/command":{"get":{"tags":["command-controller"],"summary":"List all command templates","operationId":"listAllCommand","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListCommandTemplateSummaryDTO"}}}}}},"post":{"tags":["command-controller"],"summary":"Create a new component","operationId":"createNewCommand","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewCommandTemplateDTO"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseString"}}}}}}},"/v1/auth/root/{email}":{"post":{"tags":["authorization-controller"],"operationId":"setRootUser","parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}},"delete":{"tags":["authorization-controller"],"operationId":"removeAsRootUser","parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}}},"/v1/auth/application-token":{"get":{"tags":["authorization-controller"],"operationId":"getApplicationAuthenticationToken","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListAuthenticationTokenDTO"}}}}}},"post":{"tags":["authorization-controller"],"operationId":"createNewAuthenticationToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewAuthenticationTokenDTO"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseAuthenticationTokenDTO"}}}}}}},"/v1/mock/users-auth":{"get":{"tags":["mock-user-controller"],"operationId":"getMockUser","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseMapStringString"}}}}}}},"/v1/engine/generate":{"get":{"tags":["engine-controller"],"summary":"Generate component artifact using a specific engine","operationId":"generateComponentArtifact","parameters":[{"name":"engineName","in":"query","description":"IS the engine to use represented by his name","required":true,"schema":{"type":"string"}},{"name":"componentId","in":"query","description":"Is the list of the component id for wich the artifact should be generated","required":true,"schema":{"type":"array","items":{"type":"string"}}},{"name":"allRequestParams","in":"query","description":"is the build specs to use for the generation of the artifact","required":true,"schema":{"type":"object","additionalProperties":{"type":"string"}},"example":{"buildSpecs":"value"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string","format":"binary"}}}}}}},"/v1/engine/all":{"get":{"tags":["engine-controller"],"summary":"Return all engine name","operationId":"findAllEngineNames","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseSetString"}}}}}}},"/v1/echo/test/{value}":{"get":{"tags":["Echo Controller v1"],"summary":"Example api that realize an ECHO","operationId":"echo","parameters":[{"name":"value","in":"path","description":"Is the value that will be returned in post operation","required":true,"schema":{"pattern":"[a-zA-Z0-9]*","type":"string","description":"Is the value that will be returned in post operation"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseString"}}}}}}},"/v1/auth/users":{"get":{"tags":["authorization-controller"],"operationId":"findPeople","parameters":[{"name":"search","in":"query","description":"is the prefix used to filter the people","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListPersonDTO"}}}}}}},"/v1/auth/root":{"get":{"tags":["authorization-controller"],"operationId":"findAllRoot","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListAuthorizationDTO"}}}}}}},"/v1/auth/me":{"get":{"tags":["authorization-controller"],"operationId":"me","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponsePersonDTO"}}}}}}},"/v1/auth/groups":{"get":{"tags":["authorization-controller"],"operationId":"findGroups","parameters":[{"name":"search","in":"query","description":"is the prefix used to filter the groups","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseListGroupDTO"}}}}}}},"/v1/auth/application-token/{id}":{"delete":{"tags":["authorization-controller"],"operationId":"deleteAuthenticationToken","parameters":[{"name":"id","in":"path","description":"Is the unique eid of the authentication token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResultResponseBoolean"}}}}}}}},"components":{"schemas":{"CommandTemplateInstanceDTO":{"type":"object","properties":{"id":{"type":"string","description":"The id of the component"},"parameters":{"type":"object","additionalProperties":{"type":"string","description":"The parameter/values map"},"description":"The parameter/values map"}},"description":"Define an instance of the command template with the parameters values"},"UpdateComponentDTO":{"type":"object","properties":{"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"url":{"type":"string","description":"The URL of the component [src, artifact, etc.]"},"dependOnComponentIds":{"uniqueItems":true,"type":"array","description":"The list of unique identifier of the components that this component depends on.","items":{"type":"string","description":"The list of unique identifier of the components that this component depends on."}},"commandTemplatesInstances":{"uniqueItems":true,"type":"array","description":"The list command template instances to execute to build the component.","items":{"$ref":"#/components/schemas/CommandTemplateInstanceDTO"}}},"description":"Define the single component"},"ApiResultResponseBoolean":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"boolean","description":"Is the value returned by api"}}},"CommandTemplateParameterDTO":{"required":["description","name"],"type":"object","properties":{"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the parameter"}},"description":"Define a single command parameter"},"ExecutionPipelineDTO":{"type":"object","properties":{"engine":{"type":"string","description":"The name of the pipeline"},"architecture":{"type":"array","description":"The architecture where the pipeline can work","items":{"type":"string","description":"The architecture where the pipeline can work"}},"operatingSystem":{"type":"array","description":"The operating system where the pipeline can work","items":{"type":"string","description":"The operating system where the pipeline can work"}},"executionCommands":{"type":"array","description":"The list of the commands that the pipeline will execute","items":{"type":"string","description":"The list of the commands that the pipeline will execute"}}},"description":"Define details for create a new execution pipeline for a command"},"UpdateCommandTemplateDTO":{"type":"object","properties":{"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"parameters":{"uniqueItems":true,"type":"array","description":"The parameter used by the command","items":{"$ref":"#/components/schemas/CommandTemplateParameterDTO"}},"commandExecutionsLayers":{"uniqueItems":true,"type":"array","description":"Those are the list of the action that the command will take","items":{"$ref":"#/components/schemas/ExecutionPipelineDTO"}}},"description":"Define details for create a new component"},"CommandTemplateDTO":{"type":"object","properties":{"id":{"type":"string","description":"The id of the component"},"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"parameters":{"uniqueItems":true,"type":"array","description":"The parameter used by the command","items":{"$ref":"#/components/schemas/CommandTemplateParameterDTO"}},"commandExecutionsLayers":{"uniqueItems":true,"type":"array","description":"Those are the list of the action that the command will take","items":{"$ref":"#/components/schemas/ExecutionPipelineDTO"}}},"description":"Define details for create a new component"},"NewComponentDTO":{"required":["name"],"type":"object","properties":{"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"version":{"type":"string","description":"The version of the component"},"dependOnComponentIds":{"uniqueItems":true,"type":"array","description":"The list of unique identifier of the components that this component depends on.","items":{"type":"string","description":"The list of unique identifier of the components that this component depends on."}},"commandTemplatesInstances":{"type":"array","description":"The list command template instances to execute to build the component.","items":{"$ref":"#/components/schemas/CommandTemplateInstanceDTO"}},"commandTemplates":{"type":"array","description":"The list of command templates that the component will use.","items":{"$ref":"#/components/schemas/CommandTemplateDTO"}}},"description":"Define details for create a new component"},"ApiResultResponseString":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"string","description":"Is the value returned by api"}}},"NewCommandTemplateDTO":{"required":["commandExecutionsLayers","description","name","parameters"],"type":"object","properties":{"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"dependOnComponents":{"uniqueItems":true,"type":"array","description":"The list of the component that this component depend on","items":{"type":"string","description":"The list of the component that this component depend on"}},"parameters":{"uniqueItems":true,"type":"array","description":"The parameter used by the command","items":{"$ref":"#/components/schemas/CommandTemplateParameterDTO"}},"commandExecutionsLayers":{"uniqueItems":true,"type":"array","description":"Those are the list of the action that the command will take","items":{"$ref":"#/components/schemas/ExecutionPipelineDTO"}}},"description":"Define details for create a new component"},"NewAuthenticationTokenDTO":{"type":"object","properties":{"name":{"type":"string"},"expiration":{"type":"string","format":"date"}},"description":"New authentication token for logbook"},"ApiResultResponseAuthenticationTokenDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"$ref":"#/components/schemas/AuthenticationTokenDTO"}}},"AuthenticationTokenDTO":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"email":{"type":"string"},"expiration":{"type":"string","format":"date"},"token":{"type":"string"},"applicationManaged":{"type":"boolean"}},"description":"The authentication token"},"ApiResultResponseMapStringString":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"object","additionalProperties":{"type":"string","description":"Is the value returned by api"},"description":"Is the value returned by api"}}},"ApiResultResponseSetString":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"uniqueItems":true,"type":"array","description":"Is the value returned by api","items":{"type":"string","description":"Is the value returned by api"}}}},"ApiResultResponseListComponentSummaryDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/ComponentSummaryDTO"}}}},"ComponentSummaryDTO":{"type":"object","properties":{"id":{"type":"string","description":"The unique identifier of the component"},"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"}},"description":"Define the single component"},"ApiResultResponseComponentDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"$ref":"#/components/schemas/ComponentDTO"}}},"ComponentDTO":{"type":"object","properties":{"id":{"type":"string","description":"The unique identifier of the component"},"name":{"type":"string","description":"The name of the component"},"description":{"type":"string","description":"The description of the component"},"url":{"type":"string","description":"The URL of the component [src, artifact, etc.]"},"dependOnComponentIds":{"uniqueItems":true,"type":"array","description":"The list of unique identifier of the components that this component depends on.","items":{"type":"string","description":"The list of unique identifier of the components that this component depends on."}},"commandTemplatesInstances":{"uniqueItems":true,"type":"array","description":"The list command template instances to execute to build the component.","items":{"$ref":"#/components/schemas/CommandTemplateInstanceDTO"}}},"description":"Define the single component"},"ApiResultResponseListCommandTemplateSummaryDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/CommandTemplateSummaryDTO"}}}},"CommandTemplateSummaryDTO":{"type":"object","properties":{"id":{"type":"string","description":"The id of the component"},"name":{"type":"string","description":"The name of the component"},"parameters":{"uniqueItems":true,"type":"array","description":"The parameter used by the command","items":{"$ref":"#/components/schemas/CommandTemplateParameterDTO"}},"commandExecutionsLayers":{"uniqueItems":true,"type":"array","description":"Those are the list of the action that the command will take","items":{"$ref":"#/components/schemas/ExecutionPipelineDTO"}}},"description":"Define details for create a new component"},"ApiResultResponseCommandTemplateDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"$ref":"#/components/schemas/CommandTemplateDTO"}}},"ApiResultResponseListPersonDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/PersonDTO"}}}},"PersonDTO":{"type":"object","properties":{"uid":{"type":"string"},"commonName":{"type":"string"},"surname":{"type":"string"},"gecos":{"type":"string"},"mail":{"type":"string"}},"description":"Is the value returned by api"},"ApiResultResponseListAuthorizationDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/AuthorizationDTO"}}}},"AuthorizationDTO":{"type":"object","properties":{"id":{"type":"string","description":"Is unique id of the authorizations"},"authorizationType":{"type":"string","description":"Is the type of the authorizations [User, Group, Application]","enum":["Read","Write","Admin"]},"owner":{"type":"string","description":"Is the subject owner of the authorizations"},"ownerType":{"type":"string","description":"Is the type of the owner [User, Group, Application]","enum":["User","Group","Token"]},"resource":{"type":"string","description":"The resource eof the authorizations"}},"description":"The authorization of the user on the resources returned in the payload"},"ApiResultResponsePersonDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"$ref":"#/components/schemas/PersonDTO"}}},"ApiResultResponseListGroupDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/GroupDTO"}}}},"GroupDTO":{"type":"object","properties":{"uid":{"type":"string"},"commonName":{"type":"string"}},"description":"The group of the user"},"ApiResultResponseListAuthenticationTokenDTO":{"required":["errorCode"],"type":"object","properties":{"errorCode":{"type":"integer","description":"Is the error code returned from api","format":"int32"},"errorMessage":{"type":"string","description":"In case of error not equal to 0, an error message can be reported by api, indicating what problem is occurred"},"errorDomain":{"type":"string","description":"In case of error not equal to 0, an error domain can be reported by api, indicating where the problem is occurred"},"payload":{"type":"array","description":"Is the value returned by api","items":{"$ref":"#/components/schemas/AuthenticationTokenDTO"}}}}},"securitySchemes":{"Bearer Auth":{"type":"apiKey","name":"x-vouch-idp-accesstoken","in":"header"}}}}